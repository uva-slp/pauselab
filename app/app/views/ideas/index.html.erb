
<% if can? :create, :ideas %>
  <%= link_to (t 'ideas.create_new'), new_idea_path, class: 'btn btn-primary pull-right clearfix' %>
  <br/>
  <br/>
<% end %>

<h2 class="pull-left"><%= t Idea.model_name.human(count:2) %></h2>

<%= render 'sort_controls' %>

<div class="table-responsive">
  <table class="table table-striped">

    <thead>
      <tr>
        <% if user_has_steering_access? %>
          <th><%= t 'common.id' %></th>
        <% end %>

        <% if user_has_steering_access? %>
          <th><%= t 'common.author' %></th>
        <% end %>

        <th><%= t 'common.created_at' %></th>

        <th><%= Category.model_name.human %></th>

        <th><%= Idea.human_attribute_name :description %></th>

        <% if user_has_steering_access? %>
          <th><%= Idea.human_attribute_name :status %></th>
        <% end %>

        <% if user_has_steering_access? %>
          <th><%= Idea.human_attribute_name :medium %></th>
        <% end %>

        <th><%= Idea.human_attribute_name :likes %></th>

      </tr>
    </thead>

    <% @ideas.each do |idea| %>

        <tr class="row-link" data-href="<%= idea_path(idea) %>">
          <% if idea.respond_to? :id and user_has_steering_access? %>
            <td><%= idea.id %></td>
          <% end %>

          <% if idea.respond_to? :first_name %>
            <td><%= idea.author %></td>
          <% end %>

          <% if idea.respond_to? :created_at %>
            <td><%= idea.created_at.strftime "%D" %></td>
          <% end %>

          <% if idea.respond_to? :category %>
            <td><%= idea.category.name %></td>
          <% end %>

          <% if idea.respond_to? :description %>
            <td><%= truncate(idea.description) %></td>
          <% end %>

          <% if idea.respond_to? :status %>
            <td><span class="badge <%= if idea.approved? then "badge-success" else "badge-danger" end %>">
              <%= Idea.human_enum_name(:status, idea.status) %></span></td>
          <% end %>

          <% if idea.respond_to? :medium %>
            <td><span class="badge badge-info"><%= Idea.human_enum_name(:medium, idea.medium) %></span></td>
          <% end %>

          <% if idea.respond_to? :likes %>
            <td><%= idea.likes  %></td>
          <% end %>

        </tr>
    <% end %>

  </table>

  <%= will_paginate @ideas,
        :class => "pagination-wrapper",
        :previous_label => (t 'common.previous'),
        :next_label => (t 'common.next') %>

</div>
